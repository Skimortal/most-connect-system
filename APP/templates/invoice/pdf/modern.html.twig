<!doctype html>
<html lang="de">
<head>
    <meta charset="utf-8">
    <title>{{ 'invoice.label'|trans }} {{ invoice.invoiceNumber ?? invoice.id }}</title>
    <style>
        @page { margin: 18mm 18mm 24mm 18mm; }
        body { font-family: DejaVu Sans, sans-serif; font-size: 12px; color:#222; }
        .brandbar { background: #0a6fb6; color:#fff; padding:12px 14px; }
        .brandbar table { width:100%; border-collapse:collapse; }
        .brandbar td { vertical-align:middle; }
        .brandname { font-size:18px; font-weight:bold; }
        .right { text-align:right; }
        .muted { color:#fff; }

        h1 { font-size:20px; margin:18px 0 10px; }
        table { width:100%; border-collapse:collapse; }
        .meta { margin:16px 0 6px; }
        .meta td { vertical-align:top; padding:2px 0; }

        .box { border:1px solid #ddd; padding:10px; border-radius:4px; }
        .table th, .table td { padding:8px 6px; vertical-align:top; }
        .table thead th { background:#eaf3fb; border-bottom:1px solid #0a6fb6; font-weight:bold; }
        .table tbody tr + tr td { border-top:1px solid #eee; }
        .num { text-align:right; white-space:nowrap; }

        .totals { margin-top:12px; width:100%; border-collapse:collapse; }
        .totals td { padding:6px 0; }
        .totals tr td:first-child { text-align:right; padding-right:10px; }
        .totals .line { border-top:1px solid #0a6fb6; height:1px; padding:0; }
        .totals .grand { font-weight:bold; font-size:14px; }

        .small { font-size:11px; color:#666; }

        footer {
            position:fixed; left:0; right:0; bottom:0;
            height:22mm; font-size:10px; color:#555; border-top:1px solid #ddd;
        }
        footer table { width:100%; border-collapse:collapse; }
        footer td { vertical-align:middle; padding-top:4px; }
    </style>
</head>
<body>

<div class="brandbar">
    <table>
        <tr>
            <td>
                <div class="brandname">{{ invoice.company.name }}</div>
                <div class="muted">{{ invoiceAddress.street }} · {{ invoiceAddress.zip }} {{ invoiceAddress.city }} · {{ invoiceAddress.country }}</div>
            </td>
            <td class="right">
                <img src="{{ logoDataUri }}" alt="{{ invoice.company.name }} Logo" style="height:60px;">
            </td>
        </tr>
    </table>
</div>

<table class="meta">
    <tr>
        <td style="width:55%;">
            <div class="box">
                <strong>{{ 'receiver'|trans }}:</strong><br>
                {{ invoice.customer.companyName }}<br>
                {{ invoice.customer.firstname }} {{ invoice.customer.lastname }}<br>
                {{ invoice.customer.zip }} {{ invoice.customer.city }}<br>
                {{ invoice.customer.country }}<br>
                {{ 'uid.label'|trans }}: {{ invoice.customer.uid }}
            </div>
        </td>
        <td class="right">
            <table>
                <tr>
                    <td class="right" style="padding-right:10px;">
                        <strong>{{ 'invoiceNumber.label'|trans }}</strong><br>
                        <strong>{{ 'invoiceDate.label'|trans }}</strong>
                    </td>
                    <td class="num">
                        {{ invoice.invoiceNumber }}<br>
                        {{ invoice.invoiceDate ? invoice.invoiceDate|date('d.m.Y') : '' }}
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>

<h1>{{ 'invoice.label'|trans }} {{ invoice.invoiceNumber ?? invoice.id }}</h1>
<p>{{ invoice.entryText }}</p>

<table class="table">
    <thead>
    <tr>
        <th style="width:4%;">#</th>
        <th>{{ 'description.label'|trans }}</th>
        <th class="num" style="width:10%;">{{ 'quantity.label'|trans }}</th>
        <th class="num" style="width:14%;">{{ 'unitPrice_short'|trans }}</th>
        <th class="num" style="width:10%;">{{ 'tax_rate_short'|trans }}</th>
        <th class="num" style="width:14%;">{{ 'netto_price'|trans }}</th>
    </tr>
    </thead>
    <tbody>
    {% for item in invoice.invoiceItems %}
        <tr>
            <td>{{ loop.index }}</td>
            <td><strong>{{ item.title }}</strong><br>{{ item.description }}</td>
            <td class="num">{{ item.quantity }}</td>
            <td class="num">{{ item.unitPrice|number_format(2, ',', '.') }} €</td>
            <td class="num">{{ item.taxRate is not null ? item.taxRate.rate|number_format(0, ',', '.') : '0' }} %</td>
            <td class="num">{{ item.totalNetto|number_format(2, ',', '.') }} €</td>
        </tr>
    {% else %}
        <tr><td colspan="6" class="small">{{ 'no_invoice_items'|trans }}</td></tr>
    {% endfor %}
    </tbody>
</table>

<table class="totals">
    <tr><td><strong>{{ 'total_netto.label'|trans }}:</strong></td><td class="num">{{ invoice.totalNetto|number_format(2, ',', '.') }} €</td></tr>
    <tr><td><strong>{{ 'tax_sum.label'|trans }}:</strong></td><td class="num">{{ invoice.taxSum|number_format(2, ',', '.') }} €</td></tr>
    <tr><td colspan="2" class="line"></td></tr>
    <tr><td class="grand">{{ 'total.label'|trans }}:</td><td class="num grand">{{ invoice.total|number_format(2, ',', '.') }} €</td></tr>
</table>

<p class="small" style="margin-top:14px;">{{ invoice.paymentInfoText }}</p>

<p style="margin-top:14px;">
    <strong>{{ 'our_banc_information'|trans }}:</strong><br>
    {{ 'bancAccountInstitute.label'|trans }}: {{ invoice.company.bancAccountInstitute }}<br>
    {{ 'bancAccountOwner.label'|trans }}: {{ invoice.company.bancAccountOwner }}<br>
    {{ 'bancAccountIBAN.label'|trans }}: {{ invoice.company.bancAccountIBAN }}<br>
    {{ 'bancAccountBIC.label'|trans }}: {{ invoice.company.bancAccountBIC }}
</p>

<p>{{ invoice.bottomText }}</p>

<footer>
    <table>
        <tr>
            <td style="width:60px;"><img src="{{ footerLogoDataUri }}" alt="{{ invoice.company.name }} Logo" style="width:46px;"></td>
            <td>
                {{ invoice.company.name }}<br>
                {{ invoiceAddress.street }}, {{ invoiceAddress.zip }} {{ invoiceAddress.city }}, {{ invoiceAddress.country }}
            </td>
            <td>
                T: {{ invoice.company.phone }}<br>
                E: {{ invoice.company.email }}<br>
                {{ 'uid.label'|trans }} {{ invoice.company.uid }}
            </td>
            <td>
                {{ 'bancAccountInstitute.label'|trans }}: {{ invoice.company.bancAccountInstitute }}<br>
                {{ 'bancAccountIBAN.label'|trans }}: {{ invoice.company.bancAccountIBAN }}<br>
                {{ 'bancAccountBIC.label'|trans }}: {{ invoice.company.bancAccountBIC }}
            </td>
        </tr>
    </table>
</footer>
</body>
</html>
